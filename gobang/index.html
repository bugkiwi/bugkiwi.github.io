<canvas id="m" width="570" height="570"></canvas><script>var d,dc=document,c=dc.getElementById("m").getContext("2d"),m=25,x=y=i=j=0,cl="#000",l=23,kk=[1,2,3,4],t=10;d=new Array(l);for(var i=0;i<l;i++)d[i]=new Int8Array(l);for(i=0;i<l;i++)c.moveTo(t,t+i*m),c.lineTo(560,t+i*m),c.moveTo(t+i*m,t),c.lineTo(t+i*m,560),c.stroke();addChess=((e,t)=>{c.beginPath(),c.arc(e,t,12,0,2*Math.PI,!0),c.fillStyle=cl,c.fill(),c.closePath(),"#000"==cl?(cl="red",d[i][j]=2):(cl="#000",d[i][j]=1)}),getWiner=(()=>{for(var e=0;e<l;e++)for(var i=0;i<l;i++){if(0==d[e][i])continue;if(!(kk.some(t=>d[e][i]!=d[e][i+t])&&kk.some(t=>d[e][i]!=d[e+t][i])&&kk.some(t=>d[e][i]!=d[e+t][i+t])&&kk.some(t=>d[e][i]!=d[e+t][i-t])&&kk.some(t=>d[e][i]!=d[e-t][i+t])&&kk.some(t=>d[e][i]!=d[e-t][i-t])))return d[e][i]}}),dc.onmousedown=(e=>{window.onclick=(o=>{if(f=(e=>Math.round((e-t)/m)),i=f(e.x),j=f(e.y),x=i*m+t,y=j*m+t,0==d[i][j]){addChess(x,y);var c=getWiner();c&&setTimeout(()=>alert(1==c?"红赢":"黑赢"))}else alert("非空位")})});</script>
